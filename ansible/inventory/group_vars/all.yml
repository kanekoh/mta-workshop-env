# OpenShift Cluster Information
# This file is populated from terraform/cluster outputs
# The cluster_info.json file contains the cluster details

# OpenShift GitOps Operator Configuration
openshift_gitops:
  # Operator subscription settings
  operator_namespace: openshift-gitops-operator
  operator_name: openshift-gitops-operator
  operator_channel: latest
  operator_source: redhat-operators
  
  # ArgoCD instance settings (for reference)
  argocd_namespace: openshift-gitops
  argocd_instance_name: openshift-gitops
  
  # GitOps Repository Configuration (for App of Apps pattern)
  gitops_repo:
    url: https://github.com/kanekoh/mta-workshop-env.git
    branch: main
    # Environment-specific path (default: mta)
    # Set via Ansible variable: -e gitops_env={GITOPS_ENV}
    path: "gitops/environments/{{ gitops_env | default('mta') }}/apps"
  
  # App of Apps Configuration
  app_of_apps:
    enabled: true
    name: gitops-app-of-apps

# Operators that require RoleARN ConfigMaps.
# These are created only when the corresponding Operator Application exists
# in gitops/environments/{gitops_env}/apps and the Subscription contains ROLEARN.
operator_rolearn_configmaps:
  - name: devspaces
    app_file: devspaces-operator.yml
    namespace: openshift-devspaces
    rolearn_key: devspaces
    subs_path: gitops/operators/devspaces/subs.yaml
  - name: cnpg
    app_file: cnpg-operator.yml
    namespace: cnpg-system
    rolearn_key: cnpg
    subs_path: gitops/operators/cnpg-operator/subs.yaml
  - name: mta
    app_file: mta-operator.yml
    namespace: openshift-mta
    rolearn_key: mta
    subs_path: gitops/operators/mta-operator/subs.yaml